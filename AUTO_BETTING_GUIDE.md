# 🤖 自动下注控制系统 - 使用指南

## 系统概述

基于您现有的Laravel + Vue.js技术栈，我已为您创建了一个完整的自动下注控制系统。该系统完全集成了您的现有预测分析数据，实现了数据驱动的智能下注策略。

## 🎯 核心功能

### 1. 智能下注策略

- **单点突破策略**: 专注下注预测第一名，追求高收益
- **保本对冲组合**: 分散投资前三名，最大化保本率
- **动态资金管理**: 基于信赖度调整下注金额
- **风险控制**: 每日停损机制防止过度亏损

### 2. 多重触发条件验证

系统只在以下条件**同时满足**时才执行下注：

- **高度信赖分数**: rank_confidence ≥ 88% (可调整)
- **显著分数差距**: 第一名与第二名评分差距 ≥ 6.0 (可调整)
- **充足历史数据**: 代币历史参与局数 ≥ 25局 (可调整)

### 3. 实时数据集成

- 完全基于您现有的GamePredictionService
- 自动获取最新的H2H对战分析数据
- 实时监控轮次状态和预测结果

## 🚀 快速开始

### 访问系统

1. 启动开发环境: `composer run dev`
2. 访问数据分析面板: `http://localhost:8000`
3. 点击右上角 "🤖 自动下注控制" 按钮

### 基本配置步骤

1. **输入JWT Token**: 在基础配置中输入您的下注平台JWT Token
2. **测试连接**: 点击"测试连接"验证Token有效性
3. **设置资金池**: 配置总资金池金额 (建议从小额开始)
4. **调整风险参数**:
   - 单位大小: 建议1.5% - 2%
   - 每日停损: 建议10% - 15%
5. **选择策略**:
   - 新手推荐: 保本对冲组合 (50%+30%+20%)
   - 激进策略: 单点突破
6. **保存配置**: 点击"💾 保存配置"

### 测试与启动

1. **模拟下注**: 点击"🎮 模拟下注"查看当前条件和推荐下注
2. **检查触发条件**: 查看信赖度、分数差距、历史局数是否满足
3. **启动自动下注**: 确认配置无误后点击"🚀 启动自动下注"

## 📊 系统架构

### 后端组件 (Laravel)

#### AutoBettingController

```php
app/Http/Controllers/AutoBettingController.php
```

- `getConfig()`: 获取用户配置
- `updateConfig()`: 更新配置参数
- `getStatus()`: 获取运行状态
- `toggleAutoBetting()`: 启动/停止自动下注

- `simulateBet()`: 模拟下注分析
- `checkBettingTriggers()`: 验证触发条件
- `calculateBetAmounts()`: 计算下注金额

#### API路由

```php
routes/api.php - /api/auto-betting/*
```

- `GET /config` - 获取配置
- `POST /config` - 保存配置
- `GET /status` - 获取状态
- `POST /toggle` - 控制启停

- `POST /simulate` - 模拟下注

### 前端组件 (Vue.js)

#### AutoBetting.vue

```vue
resources/js/pages/AutoBetting.vue
```

- 完整的控制面板UI
- 实时数据展示
- 配置管理界面
- 状态监控仪表板

#### 页面路由

```php
routes/web.php - /auto-betting
```

## 🎲 下注策略详解

### 策略A: 单点突破

**适用场景**: 高信赖度场景，追求最大收益

```
下注金额 = 基础单位 × (rank_confidence / 100)
```

**示例**:

- 基础单位: $15 (1.5% of $1000)
- 预测第一名信赖度: 92%
- 实际下注: $15 × 0.92 = $13.80

### 策略B: 保本对冲组合

**适用场景**: 稳健投资，最大化保本率

```
第一名: 50% × 基础单位 × 信赖度
第二名: 30% × 基础单位 × 信赖度
第三名: 20% × 基础单位 × 信赖度
```

**示例** (基础单位$15):

- 第一名 (92%信赖): $15 × 0.5 × 0.92 = $6.90
- 第二名 (85%信赖): $15 × 0.3 × 0.85 = $3.83
- 第三名 (78%信赖): $15 × 0.2 × 0.78 = $2.34
- **总投注**: $13.07

## ⚙️ 配置参数详解

### 基础参数

| 参数     | 默认值 | 建议范围    | 说明             |
| -------- | ------ | ----------- | ---------------- |
| 资金池   | $1000  | $100-$10000 | 总可用资金       |
| 单位大小 | 1.5%   | 1%-3%       | 每次下注基础金额 |
| 每日停损 | 15%    | 10%-20%     | 单日最大亏损限制 |

### 触发条件

| 参数       | 默认值 | 建议范围 | 说明             |
| ---------- | ------ | -------- | ---------------- |
| 信赖度阈值 | 88%    | 85%-95%  | 最低信赖度要求   |
| 分数差距   | 6.0    | 4.0-10.0 | 第一二名最小差距 |
| 最小局数   | 25     | 20-50    | 历史数据要求     |

## 🔒 安全特性

### 多层风险控制

1. **触发条件验证**: 三重条件同时满足才下注
2. **资金池管理**: 严格的单位大小控制
3. **每日停损**: 防止连续亏损
4. **JWT Token验证**: 确保连接安全性

### 数据驱动决策

- 基于您已验证的预测模型
- 利用历史保本率数据
- 考虑代币稳定性指标
- 整合市场动量分析

## 📈 监控与分析

### 实时状态监控

- **运行状态**: 系统启停状态
- **下注统计**: 总次数、成功率
- **盈亏追踪**: 实时和累计损益
- **错误监控**: 异常情况报警

### 性能指标

基于您的历史数据显示:

- **预测第一名保本率**: 66.7%
- **预测第二名保本率**: 57.3%
- **预测第三名保本率**: 61.3%
- **精准预测率**: 系统会实时计算

## 🛠️ 技术特点

### Laravel后端

- 遵循PSR-12编码标准
- 完整的数据验证
- 缓存机制优化性能
- 错误处理和日志记录

### Vue.js前端

- Vue 3 Composition API
- TypeScript类型安全
- Naive UI组件库
- 响应式设计

### 数据集成

- 复用现有GameDataProcessorService
- 兼容现有预测分析管道
- 无需额外数据库迁移

## 🚨 重要提醒

### 风险警告

1. **请从小额资金开始测试**
2. **定期检查和调整参数**
3. **监控市场变化和策略效果**
4. **保持理性投资心态**

### 建议使用流程

1. **第一周**: 小额测试 ($100-$200)
2. **观察期**: 监控1-2周表现
3. **逐步调整**: 根据实际效果优化参数
4. **稳定运行**: 确认策略有效后正式使用

## 📞 技术支持

如需要进一步的定制化开发或参数调优，可以考虑:

- 添加更多复杂的策略算法
- 集成更多市场数据源
- 实现更精细的风险控制
- 添加历史回测功能

该系统完全基于您现有的技术架构和数据，确保了高度的兼容性和可维护性。
